# Array of Structures (AoS) vs Structure of Arrays (SoA)

## Array of Structures (AoS)

### CPU

```bash
$ ./nbody.x 1000 10
===============================
 Initialize Gravity Simulation
 nPart = 1000; nSteps = 10; dt = 0.1
------------------------------------------------
 s       dt      kenergy     time (s)    GFlops      
------------------------------------------------
 1       0.1     0.2496      0.003716    7.8092      
 2       0.2     0.24659     0.0040209   7.217       
 3       0.3     0.24359     0.0029621   9.7967      
 4       0.4     0.24063     0.0027812   10.434      
 5       0.5     0.23768     0.0027862   10.415      
 6       0.6     0.23475     0.0028021   10.356      
 7       0.7     0.23185     0.0027828   10.428      
 8       0.8     0.22896     0.002748    10.56       
 9       0.9     0.2261      0.0026891   10.791      
 10      1       0.22326     0.0026948   10.768      

# Total Time (s)      : 0.030023
# Average Performance : 10.444 +- 0.28877
===============================
```

### GPU

```bash
$ ./nbody.x 1000 10
===============================
 Initialize Gravity Simulation
 nPart = 1000; nSteps = 10; dt = 0.1
------------------------------------------------
 s       dt      kenergy     time (s)    GFlops      
------------------------------------------------
 1       0.1     8.1978e-12  0.33563     0.086461    
 2       0.2     -2.4319e-18 0.007199    4.0309      
 3       0.3     -8.2969e-27 0.006521    4.4501      
 4       0.4     3.5956e-34  0.006222    4.6639      
 5       0.5     0           0.006196    4.6835      
 6       0.6     0           0.006161    4.7101      
 7       0.7     0           0.00614     4.7262      
 8       0.8     0           0.0060191   4.8211      
 9       0.9     0           0.0059431   4.8828      
 10      1       0           0.0059361   4.8885      

# Total Time (s)      : 0.39207
# Average Performance : 4.7283 +- 0.13326
===============================
```

## Structure of Arrays (SoA)

### CPU

```bash
$ ./nbody.x 1000 10
===============================
 Initialize Gravity Simulation
 nPart = 1000; nSteps = 10; dt = 0.1
------------------------------------------------
 s       dt      kenergy     time (s)    GFlops      
------------------------------------------------
 1       0.1     0.2496      0.0026329   11.022      
 2       0.2     0.24659     0.0025961   11.178      
 3       0.3     0.24359     0.0025959   11.179      
 4       0.4     0.24063     0.002552    11.371      
 5       0.5     0.23768     0.002666    10.885      
 6       0.6     0.23475     0.0023439   12.381      
 7       0.7     0.23185     0.001914    15.161      
 8       0.8     0.22896     0.001534    18.917      
 9       0.9     0.2261      0.001298    22.358      
 10      1       0.22326     0.0011032   26.305      

# Total Time (s)      : 0.021341
# Average Performance : 16.07 +- 5.4741
===============================
```

### GPU

```bash
$ ./nbody.x 1000 10
===============================
 Initialize Gravity Simulation
 nPart = 1000; nSteps = 10; dt = 0.1
------------------------------------------------
 s       dt      kenergy     time (s)    GFlops      
------------------------------------------------
 1       0.1     0.2496      0.40348     0.071921    
 2       0.2     0.24659     0.0084178   3.4473      
 3       0.3     0.24359     0.0073018   3.9742      
 4       0.4     0.24063     0.0068669   4.2259      
 5       0.5     0.23768     0.0071061   4.0837      
 6       0.6     0.23475     0.006943    4.1796      
 7       0.7     0.23185     0.0070732   4.1027      
 8       0.8     0.22896     0.0067232   4.3163      
 9       0.9     0.2261      0.0067492   4.2997      
 10      1       0.22326     0.006721    4.3176      

# Total Time (s)      : 0.46748
# Average Performance : 4.1875 +- 0.11784
===============================
```
